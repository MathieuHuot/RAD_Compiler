\begin{figure*}[t]
    \begin{tabular}{|l c l|}
        \hline
        \textit{Inlining and forward substitution}  & &\\ \hline
        !(fun (x1,...,xn) -> e)(e1,...,en)! & \transto & !let x1=e1 in ... let xn=en in e! \\ \hline
        !let x1=e1 in e2! \quad\quad(!x1!$\not\in$!FV(e2))! & \transto & !e2!  \\ \hline
        !let x1=x2 in e! & \transto & !e[x2/x1]! \\ \hline
        !let x1= c in e! \quad\quad\hspace{0.5em}(!c=0! or !c=1!) & \transto & !e[c/x1]! \\ \hline
        $\pi_i$!<e1, e2>! & \transto & !ei! \\
        \hline \hline
        \textit{Algebraic simplifications}  & & \\ \hline
        !0*e! & \transto & 0 \\ \hline
        !0+e!,!1*e! & \transto & !e! \\
        \hline \hline
        \textit{Array algebraic simplifications}  & & \\ \hline
        !map2 * A OnesLike(B)!  & \transto & !A! \\ \hline
        !map2 + A ZerosLike(B)!  & \transto & !A! \\ \hline
        !map2 (x,y.e) A B! \quad\quad(!y! not free in !e! ) & \transto & !map x.e A!  \\ \hline
        !map2 (x,y.e) A B! \quad\quad(!x! not free in !e! ) & \transto & !map y.e B!  \\ \hline
        !map (x.x) A! & \transto & A \\ \hline
        !scanl * OnesLike(A)! & \transto & !OnesLike(A)! \\ \hline
        !scanr * OnesLike(A)! & \transto & !OnesLike(A)! \\ \hline
        !shift1 OnesLike(A)! & \transto & !OnesLike(A)! \\ \hline
        !foldl,reduce * 1 OnesLike(A)! & \transto & 1 \\ \hline
        !foldl,reduce + 0 ZerosLike(A)! & \transto & 0 \\ 
        \hline \hline
        \textit{Classic array simplifications}  & & \\ \hline
        !map (x.e1) (map (y.e2) A)! & \transto & !map (y. let x=e2 in e1) A! \\ \hline
        !map (x.e1) (map2 (y1,y2.e2) A B)! & \transto & !map2 (y1,y2. let x=e2 in e1) A! \\ \hline
        \end{tabular}
    \caption{Optimisations}
    \label{fig:optim} 
    TODO: there are way more, like the obvious ones to reduce map3 to map2. some of them I'm not even sure when to do them because of cash optim...  
\end{figure*}