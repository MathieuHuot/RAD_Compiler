\begin{figure*}[t]
    \setlength{\tabcolsep}{0.3em}
    \centering
    \begin{tabular}{|l c l|l|}
    \hline
    \multicolumn{3}{|c|}{\textbf{Core Grammar}} & \multicolumn{1}{c|}{\textbf{Description}}\\\hline
    !T! & \mbox{::=} & ![A$_{1}$,$\ldots$,A$_n$]! & \grammarcomment{Lists of types from target} \\
    \hline
    !e! & \mbox{::=} & $\ldots$ & \grammarcomment{Same as source UNF}\\
    & $\mid$ & !J!$^T$!var!$_{T;i}$ & \grammarcomment{Jacobian for variable}\\
    & $\mid$ & !J!$^T$!op!$_{T;n}$ & \grammarcomment{Jacobian for operation, $0\leq n\leq 2$}\\
    & $\mid$ & !J!$^T$!pair$_{T;A\times B}$! & \grammarcomment{Jacobian for pairing}\\
    & $\mid$ & !J!$^T$!proj$_{T_1;T_2;T_3}$! & \grammarcomment{Jacobian for projection}\\
    & $\mid$ & !J!$^T$!map2!$_{T;x,y.e}$ & \grammarcomment{Jacobian for map2}\\
    & $\mid$ & !J!$^T$!reduce!$_{T;x,y.e;e}$ & \grammarcomment{Jacobian for reduce}\\
    & $\mid$ & !<e, e>! & \grammarcomment{Term pairing}\\
    & $\mid$ & !e! $\icomp$ !e! & \grammarcomment{Internal function composition}\\
    \hline
    \end{tabular} \\ \vspace{0.2cm}
    \begin{tabular}{|c|}
    \hline
    \begin{tabular}{c} 
        \\\hline
        !T,A$_i$! $\vdash$ !J!$^T$!var!$_{T;i}$: !T!
        \end{tabular}~(!T=A$_1$,$\ldots$,A$_n$!)
        \hspace{0.5cm}
        \begin{tabular}{c}
            \\\hline
            !T,!$\reals^{\times(n+1)} \vdash$ !J!$^T$!op!$_{T;n}$ : !T,!$\reals^{\times(n)}$
        \end{tabular}~(!T=A$_1$,$\ldots$,A$_n$!)
\\
        \begin{tabular}{c}
            \\\hline
            !T,A$\times$B! $\vdash$ !J!$^T$!pair!$_{T;A\times B}$ : !T,A,B!
        \end{tabular}~(!T=A$_1$,$\ldots$,A$_n$!)
\\
        \begin{tabular}{c}
            \\\hline
            !T$_1$,T$_3$! $\vdash$ !J!$^T$!proj!$_{T_1;T_2;T_3}$ : !T$_1$,T$_2$,T$_3$!
        \end{tabular}
\\  
        \begin{tabular}{c}
            !x$_1$:A$_1$,$\ldots$,x$_n$:A$_n$,x:!$\reals$!,y:!$\reals$ $\vdash$ !e!: $\reals$ \quad in Source Language
            \\\hline  
            !T,!$\Array{\reals}{n},\Array{\reals}{n},\Array{\reals}{n} \vdash$ !J!$^T$!map2!$_{T; x,y.e}$: !T,!$\Array{\reals}{n}$,$\Array{\reals}{n}$
        \end{tabular}~(!T=A$_1$,$\ldots$,A$_n$!)
\\  
        \begin{tabular}{c}
            !x:!$\reals$!,y:!$\reals$ $\vdash$ !e$_1$!: $\reals$ \quad !x$_1$:A$_1$,$\ldots$,x$_n$:A$_n$! $\vdash$ !e$_2$!:$\reals$ \quad in Source Language
            \\\hline  
            !T,!$\Array{\reals}{n},\reals \vdash$ !J!$^T$!reduce!$_{T; x,y.e_1; e_2}$: !T,!$\Array{\reals}{n}$
        \end{tabular}~(!T=A$_1$,$\ldots$,A$_n$!)
\\
        \begin{tabular}{c}
            !T! $\vdash$ !e$_1$: T$_1$!  \quad !T! $\vdash$ !e$_1$: T$_2$!
            \\ \hline
            !T! $\vdash$ !<e$_1$, e$_2$>: T$_1$,T$_2$!
        \end{tabular}
        \hspace{0.5cm}
        \begin{tabular}{c}
            !T1! $\vdash$ e$_1$: [\underline{T$_3$} -> B]  \quad !T$_2$ $\vdash$ e$_2$: T$_3$! 
            \\ \hline
            !T1! $\vdash$ !e$_1$! $\icomp$ !e$_2$!:[\underline{T$_2$}! -> B!]
        \end{tabular}\\\hline
    \end{tabular}
    \vspace{-0.4cm}
    \caption{Grammar and type system of the target UNF.}
    \label{fig:unf_target_grammar}
    \vspace{-0.4cm}
\end{figure*}