\section{Correctness}
\label{sec:correctness}

We now prove that our transformations are correct. 
 The main result of the section is

 \begin{theorem}
    TODO: rephrase following Section~\ref{sec:simplediff}.
     For every $\Gamma \vdash$ !e: \reals!, we have 
     $\sem{\pi_2 \invUNF{\UNF{e}}(Id_\Gamma)(last(1:\reals))}= \nabla_{\Gamma}\sem{e}$.
 \end{theorem}
 where $Id_\Gamma$ is the identity function, 
 $\sem{-}$ an appropriate denotational semantics of smooth functions,
 and $last(a)$ is the hot-vecteur encoding $(0,\ldots,0,a)$. 

\subsection{Denotational semantics for the source and target languages} 


\begin{itemize}
    \item syntactic (multi?)category category
    \item semantics in Manifolds or Eucl: TODO: need be clearer arrays of fixed size in syntax, should reflect the semantics
    \item semantics for the array part
\end{itemize}

 \subsection{UNF semantics} % (fold)
 \label{sub:UNF semantics}
 
\begin{itemize}
    \item TODO: what do I do here?
\end{itemize}


 \subsection{Correctness transformations} % (fold)
 \label{sub:Correctness transformations}


 \subsection{Correctness optimisations} % (fold)
 \label{sub:Correctness optimisations}
 
